<!doctype html>
<html ng-app="todoApp">
  <head>
    <link rel="stylesheet" href="node_modules/angular-material/angular-material.min.css"/>
    <link rel="stylesheet" href="todo.css">
  </head>
  <body ng-app="todoApp" layout="column">
<script src="node_modules/angular/angular.min.js"></script>
<script src="node_modules/angular-animate/angular-animate.min.js"></script>
<script src="node_modules/angular-aria/angular-aria.min.js"></script>
<script src="node_modules/angular-material/angular-material.min.js"></script>

    <script src="friend.js"></script>
    <md-toolbar>
        <h1>CGI Friend Zone</h1>
    </md-toolbar>
    
   
       
   
      
  
    <div class="container" layout="row" flex ng-controller="FriendController as friendZone" >

      
      <md-sidenav md-is-locked-open="true"class="lightblue" >
      <ul class="unstyled">
        <li ng-repeat="friend in friendZone.users" ng-click="friendZone.chooseFriend(friend.name)" ng-class="{selected: friendZone.isSelected(friend)}">
          <span>{{friend.name}}</span>
        </li>
      </ul>
      </md-sidenav>
      <md-content flex class="green">

        <div ng-repeat="friend in friendZone.users">
        <div ng-if="friend !== friendZone.chosenFriend">
          <label>Name: {{friend.name}}</label>
          <label>Age: {{friend.age}}</label>
          <Button  ng-click="friendZone.selectShowMore(friend.name)">
            Select {{friend.name}} to see photos
          </Button>
        </div>
      </div>

      <!--<form ng-submit="friendZone.addFriend()">
        <input type="text" ng-model="friendZone.friendName"  size="30"
               placeholder="add new friend here">
        <input class="btn-primary" type="submit" value="add">
      </form>-->

      
      <div ng-repeat="friend in friendZone.users">
        <div ng-if="friend.showMore">
            <h3>Selected Profile: {{friend.name}}</h3>
            <label>Name: <input type="text" ng-model="friend.name"></label>
            <label>Age: <input type="number" ng-model="friend.age"></label>
            <div class="profile-images">
              <h4>Profile Photos:</h4>
              <div ng-repeat="url in friend.fbImgUrls" class="image-container">
                <img ng-src="{{url}}" style="height:150px; width:150px; margin:5px; border-radius:8px; object-fit:cover;">
              </div>
            </div>
            <button ng-click="friendZone.closeShowMore(friend.name)">Close Profile</button>
            <button ng-click="friendZone.setMatch(friend.name)">Set Match</button>
        </div>
      </div>

      <div ng-repeat="friend in friendZone.chosenFriend.matches">

        
      
          <label>Name: <input type="text" ng-model="friend.name"></label>
          <label>Age: <input type="number" ng-model="friend.age"></label>
          <label>
            <input type="checkbox" ng-model="friend.messageToSelected">
            Message to {{friend.name}}
          </label>
        </div>

        <div ng-if="friend === friendZone.chosenFriend && friend.messages.length > 0">
          <label>Messages:</label>
          <ul>
            <li ng-repeat="message in friend.messages">
              <div ng-if="message.from == friendZone.chosenFriend.name" class="yellow">
                <strong>{{friendZone.getRecipientNames(message)}}:</strong> {{message.text}}
              </div>
              <div ng-if="message.from != friendZone.chosenFriend.name" class="pink">
                <strong>{{message.from}}:</strong> {{message.text}}
              </div>
            </li>
          </ul>
        
      </div>

      <div>
        <label>Message:</label>
        <textarea ng-model="friendZone.message"></textarea>
        <button ng-click="friendZone.addMessage()">Send Message</button>
      </div>
      </md-content>
      </div>
  
<style>
    .red{background-color: red;}
    .lightblue{background-color: lightblue; }
    .green{background-color: green; }
    .pink{background-color: pink; }
    .yellow{background-color: yellow; }
    
    .profile-images {
        margin: 15px 0;
        padding: 10px;
        border: 2px solid #ccc;
        border-radius: 10px;
        background-color: #f9f9f9;
    }
    
    .image-container {
        display: inline-block;
        margin: 5px;
    }
    
    .selected {
        background-color: #e3f2fd;
        border: 2px solid #2196f3;
    }
</style>

  </body>
</html>